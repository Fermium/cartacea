
box: "ubuntu:xenial"
build: 
  steps: 
    -script: 
        code: |
            sudo apt-get update
            sudo apt-get install -y curl wget nodejs npm build-essential
            ln -s /usr/bin/nodejs /usr/bin/node
            echo "node version $(node -v) running"
            echo "npm version $(npm -v) running"
        name: "Install nodejs"
    -script: 
        code: "sudo apt-get -y install texlive-full \n"
        name: "Install Latex"
    -script: 
        code: |
            sudo apt-get -y install jq python-pip zip ghostscript fonts-roboto texlive-full
            wget `curl https://api.github.com/repos/jgm/pandoc/releases/latest | jq -r '.assets[] | .browser_download_url | select(endswith("deb"))'` -O pandoc.deb && sudo dpkg -i pandoc.deb && rm pandoc.deb
            npm install 
            npm install gulp -g
        name: "Install Pandoc"
    -script: 
        code: "gulp build"
        name: build
    -script: 
        code: |
            zip -r build.zip _build
            curl --upload-file ./build.zip https://transfer.sh/build.zip
        name: "post build"
command-timeout: 30
